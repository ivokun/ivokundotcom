---
import type { Home } from "@api/home";
import NewLayout from "@layouts/NewLayout.astro";
import { marked } from "marked";
import Navigation from '@components/Navigation.astro';
import HeroImage from '@components/HeroImage.astro';


const homeResponse = await fetch(
  `${import.meta.env.CMS_API_URL}/home?populate=*`,
  {
    headers: {
      "Content-Type": "application/json",
      Authorization: `bearer ${import.meta.env.CMS_API_TOKEN}`,
    },
  }
);
const { data: homeData } = await homeResponse.json();
const home: Home = homeData.attributes;
const parsedDescription = marked.parse(home.description ?? "");

---

<NewLayout 
  title="HOME - IVOKUN BLOG" 
  description={parsedDescription}
  ogImage="https://static.ivokun.com/large_Connection_6f16270cb4.JPG"
>
  <Navigation />
  <HeroImage 
    title="IVOKUN BLOG"
    subtitle="Raw. Bold. Unfiltered."
    description={home.description ?? ""}
    imageUrl="https://static.ivokun.com/large_Connection_6f16270cb4.JPG"
    imageAlt="Two silhouetted figures standing against a brightly lit marble-patterned wall, creating dramatic contrast between dark figures and illuminated background"
  />
</NewLayout>
