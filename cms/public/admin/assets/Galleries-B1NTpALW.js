import{d,c as W,t as s,i as l,b as a,F as X,j as Y,e as h,k as Z,S as E,a as $,f as ee}from"./index-q5GqSJ5T.js";import{M as C}from"./Modal-DV3PoY_p.js";import{A as F}from"./components-BdTiow2K.js";var te=s('<svg class="w-4 h-4 mr-2"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v16m8-8H4">'),le=s('<div class="text-center py-12 text-gray-500"><svg class="mx-auto h-12 w-12 text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><p class=mt-2>No galleries yet'),re=s('<div class=p-6><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">'),se=s("<p class=text-gray-700>Are you sure you want to delete <strong></strong>?"),ne=s("<p class=text-gray-700>Are you sure you want to publish <strong></strong>?"),ae=s("<p class=text-gray-700>Are you sure you want to unpublish <strong></strong>?"),ie=s('<div class=p-8><div class="page-header flex justify-between items-center"><div><h1 class=page-title>Galleries</h1><p class=page-subtitle>Manage photo galleries</p></div></div><div class="card p-4 mb-6"><label class=label>Status</label><select class="input w-48"><option value=all>All</option><option value=draft>Draft</option><option value=published>Published</option></select></div><div class=card>'),oe=s('<div class="p-8 text-center"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto">'),ue=s('<div class="border border-gray-200 rounded-lg overflow-hidden"><div class="aspect-video bg-gray-100 flex items-center justify-center"><svg class="w-12 h-12 text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><div class=p-4><div class="flex items-start justify-between"><div><h3 class="font-semibold text-gray-900"></h3><p class="text-sm text-gray-500"> images</p></div><span></span></div><p class="text-xs text-gray-400 mt-2"></p><div class="flex items-center gap-2 mt-4"><button class="p-2 text-red-600 hover:bg-red-50 rounded-lg"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),ce=s('<button class="btn btn-primary btn-sm">Publish'),de=s('<button class="btn btn-secondary btn-sm">Unpublish'),S=s('<button class="btn btn-secondary flex-1">Cancel'),he=s('<button class="btn btn-danger flex-1">'),H=s('<button class="btn btn-primary flex-1">');function $e(){const[f,N]=d("all"),[v,{refetch:m}]=W(async()=>{const t={};return f()!=="all"&&(t.status=f()),(await $.galleries.list(t)).data}),[_,p]=d(null),[x,g]=d(null),[y,b]=d(null),[o,u]=d(!1);async function O(){const t=_();if(t){u(!0);try{await $.galleries.delete(t.id),p(null),m()}catch(n){console.error("Delete failed:",n)}finally{u(!1)}}}async function V(){const t=x();if(t){u(!0);try{await $.galleries.publish(t.id),g(null),m()}catch(n){console.error("Publish failed:",n)}finally{u(!1)}}}async function z(){const t=y();if(t){u(!0);try{await $.galleries.unpublish(t.id),b(null),m()}catch(n){console.error("Unpublish failed:",n)}finally{u(!1)}}}function R(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}return(()=>{var t=ie(),n=t.firstChild;n.firstChild;var M=n.nextSibling,T=M.firstChild,D=T.nextSibling,q=M.nextSibling;return l(n,a(F,{href:"/galleries/new",class:"btn btn-primary",get children(){return[te(),"New Gallery"]}}),null),D.addEventListener("change",e=>N(e.currentTarget.value)),l(q,a(E,{get when(){return!v.loading},get fallback(){return oe()},get children(){var e=re(),i=e.firstChild;return l(i,a(X,{get each(){return v()},children:r=>(()=>{var P=ue(),I=P.firstChild,J=I.nextSibling,j=J.firstChild,U=j.firstChild,A=U.firstChild,L=A.nextSibling,K=L.firstChild,G=U.nextSibling,B=j.nextSibling,w=B.nextSibling,k=w.firstChild;return l(A,()=>r.title),l(L,()=>r.imageCount,K),l(G,()=>r.status),l(B,()=>R(r.createdAt)),l(w,a(F,{get href(){return`/galleries/${r.id}`},class:"btn btn-secondary btn-sm flex-1",children:"Edit"}),k),l(w,(()=>{var Q=Y(()=>r.status==="draft");return()=>Q()?(()=>{var c=ce();return c.$$click=()=>g(r),c})():(()=>{var c=de();return c.$$click=()=>b(r),c})()})(),k),k.$$click=()=>p(r),h(()=>Z(G,`badge ${r.status==="published"?"badge-success":"badge-warning"}`)),P})()})),l(e,a(E,{get when(){return v()?.length===0},get children(){return le()}}),null),e}})),l(t,a(C,{get isOpen(){return!!_()},onClose:()=>p(null),title:"Delete Gallery",get footer(){return[(()=>{var e=S();return e.$$click=()=>p(null),e})(),(()=>{var e=he();return e.$$click=O,l(e,()=>o()?"Deleting...":"Delete"),h(()=>e.disabled=o()),e})()]},get children(){var e=se(),i=e.firstChild,r=i.nextSibling;return l(r,()=>_()?.title),e}}),null),l(t,a(C,{get isOpen(){return!!x()},onClose:()=>g(null),title:"Publish Gallery",get footer(){return[(()=>{var e=S();return e.$$click=()=>g(null),e})(),(()=>{var e=H();return e.$$click=V,l(e,()=>o()?"Publishing...":"Publish"),h(()=>e.disabled=o()),e})()]},get children(){var e=ne(),i=e.firstChild,r=i.nextSibling;return l(r,()=>x()?.title),e}}),null),l(t,a(C,{get isOpen(){return!!y()},onClose:()=>b(null),title:"Unpublish Gallery",get footer(){return[(()=>{var e=S();return e.$$click=()=>b(null),e})(),(()=>{var e=H();return e.$$click=z,l(e,()=>o()?"Unpublishing...":"Unpublish"),h(()=>e.disabled=o()),e})()]},get children(){var e=ae(),i=e.firstChild,r=i.nextSibling;return l(r,()=>y()?.title),e}}),null),h(()=>D.value=f()),t})()}ee(["click"]);export{$e as default};
