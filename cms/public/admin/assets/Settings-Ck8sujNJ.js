import{c as H,d as g,t as a,i as l,b as u,F as L,j as h,S as N,e as _,a as x,f as E}from"./index-DHZHvvFV.js";import{M as k}from"./Modal-BHoXCmpo.js";var O=a("<div class=space-y-4>"),U=a('<div class="text-center py-8 text-gray-500"><svg class="mx-auto h-8 w-8 text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path></svg><p class=mt-2>No API keys yet'),B=a('<form class=space-y-4><div><label for=keyName class=label>Key Name</label><input id=keyName type=text required class=input placeholder="e.g., Production API"></div><button type=submit class="btn btn-primary w-full">'),T=a(`<div class=space-y-4><p class="text-sm text-gray-600">Make sure to copy your API key now. You won't be able to see it again!</p><div><label class=label>Name</label><p class=text-gray-900></p></div><div><label class=label>API Key</label><code class="block p-3 bg-gray-100 rounded-lg text-sm break-all">`),q=a("<p class=text-gray-700>Are you sure you want to revoke <strong></strong>? Any applications using this key will lose access immediately."),z=a('<div class="p-8 max-w-4xl"><div class=page-header><h1 class=page-title>Settings</h1><p class=page-subtitle>Manage API keys and settings</p></div><div class="card p-6"><div class="flex items-center justify-between mb-6"><h2 class="text-lg font-semibold text-gray-900">API Keys</h2><button class="btn btn-primary"><svg class="w-4 h-4 mr-2"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v16m8-8H4"></path></svg>Generate New Key'),Y=a('<div class="text-center py-8"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto">'),J=a('<div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg"><div><p class="font-medium text-gray-900"></p><p class="text-sm text-gray-500">Created </p></div><button class="btn btn-danger btn-sm">Revoke'),Q=a('<button class="btn btn-secondary flex-1">Close'),V=a('<button class="btn btn-primary flex-1">Copy to Clipboard'),W=a('<button class="btn btn-secondary flex-1">Cancel'),X=a('<button class="btn btn-danger flex-1">');function te(){const[m,{refetch:w}]=H(async()=>await x.apiKeys.list()),[i,p]=g(null),[b,y]=g(null),[$,C]=g(""),[S,A]=g(!1),[K,I]=g(!1);async function D(t){t.preventDefault(),A(!0);try{const s=await x.apiKeys.create({name:$()});p({name:s.name,key:s.key}),C(""),w()}catch(s){console.error("Failed to create API key:",s)}finally{A(!1)}}async function R(){const t=b();if(t){I(!0);try{await x.apiKeys.delete(t.id),y(null),w()}catch(s){console.error("Failed to delete API key:",s)}finally{I(!1)}}}function P(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}return(()=>{var t=z(),s=t.firstChild,M=s.nextSibling,j=M.firstChild,F=j.firstChild,G=F.nextSibling;return G.$$click=()=>p({name:"",key:""}),l(M,u(N,{get when(){return!m.loading},get fallback(){return Y()},get children(){return[(()=>{var e=O();return l(e,u(L,{get each(){return m()},children:n=>(()=>{var r=J(),o=r.firstChild,c=o.firstChild,d=c.nextSibling;d.firstChild;var f=o.nextSibling;return l(c,()=>n.name),l(d,()=>P(n.createdAt),null),l(d,(()=>{var v=h(()=>!!n.lastUsedAt);return()=>v()&&` â€¢ Last used ${P(n.lastUsedAt)}`})(),null),f.$$click=()=>y(n),r})()})),e})(),u(N,{get when(){return m()?.length===0},get children(){return U()}})]}}),null),l(t,u(k,{get isOpen(){return h(()=>!!i())()&&!i()?.key},onClose:()=>p(null),title:"Generate API Key",get footer(){return(()=>{var e=Q();return e.$$click=()=>p(null),e})()},get children(){var e=B(),n=e.firstChild,r=n.firstChild,o=r.nextSibling,c=n.nextSibling;return e.addEventListener("submit",D),o.$$input=d=>C(d.currentTarget.value),l(c,()=>S()?"Generating...":"Generate Key"),_(()=>c.disabled=S()||!$().trim()),_(()=>o.value=$()),e}}),null),l(t,u(k,{get isOpen(){return h(()=>!!i())()&&!!i()?.key},onClose:()=>p(null),title:"API Key Created",get footer(){return(()=>{var e=V();return e.$$click=()=>{navigator.clipboard.writeText(i().key)},e})()},get children(){var e=T(),n=e.firstChild,r=n.nextSibling,o=r.firstChild,c=o.nextSibling,d=r.nextSibling,f=d.firstChild,v=f.nextSibling;return l(c,()=>i()?.name),l(v,()=>i()?.key),e}}),null),l(t,u(k,{get isOpen(){return!!b()},onClose:()=>y(null),title:"Revoke API Key",get footer(){return[(()=>{var e=W();return e.$$click=()=>y(null),e})(),(()=>{var e=X();return e.$$click=R,l(e,()=>K()?"Revoking...":"Revoke Key"),_(()=>e.disabled=K()),e})()]},get children(){var e=q(),n=e.firstChild,r=n.nextSibling;return l(r,()=>b()?.name),e}}),null),t})()}E(["click","input"]);export{te as default};
