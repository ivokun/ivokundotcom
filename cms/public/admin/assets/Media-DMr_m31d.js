import{c as z,d as m,t as l,i as r,b as i,S as g,F as N,e as $,s as A,a as x,f as P}from"./index-hslFEwih.js";import{M as E}from"./Modal-XYMlKrKX.js";var R=l('<div class="flex flex-col items-center"><svg class="w-8 h-8 text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg><span class="text-sm text-gray-500 mt-1">Click to upload or drag and drop</span><span class="text-xs text-gray-400 mt-1">PNG, JPG, GIF up to 10MB'),V=l('<div class="text-center py-12 text-gray-500"><svg class="mx-auto h-12 w-12 text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><p class=mt-2>No media files yet'),q=l('<div class=p-6><div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">'),I=l('<div><label class=label>Filename</label><p class="text-sm text-gray-600 mb-4"></p><label for=alt class=label>Alt Text</label><input id=alt type=text class=input placeholder="Describe the image"><p class="mt-1 text-xs text-gray-500">Used for accessibility and SEO'),J=l("<p class=text-gray-700>Are you sure you want to delete <strong></strong>?"),K=l('<div class=p-8><div class=page-header><h1 class=page-title>Media Library</h1><p class=page-subtitle>Upload and manage images</p></div><div class="card p-6 mb-6"><label class="flex flex-col items-center justify-center w-full h-32 px-4 transition bg-white border-2 border-gray-300 border-dashed rounded-lg appearance-none cursor-pointer hover:border-gray-400 focus:outline-none"><input type=file class=hidden accept=image/*></label></div><div class=card>'),Q=l('<div class="flex items-center gap-2"><div class="animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"></div><span class=text-gray-500>Uploading...'),W=l('<div class="p-8 text-center"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto">'),X=l('<div class="group relative aspect-square bg-gray-100 rounded-lg overflow-hidden"><img class="w-full h-full object-cover"><div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity opacity-0 group-hover:opacity-100 flex items-center justify-center gap-2"><button class="p-2 bg-white rounded-lg text-gray-700 hover:bg-gray-100"title="Edit alt text"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button><button class="p-2 bg-white rounded-lg text-red-600 hover:bg-red-50"title=Delete><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),L=l('<button class="btn btn-secondary flex-1">Cancel'),Y=l('<button class="btn btn-primary flex-1">'),Z=l('<button class="btn btn-danger flex-1">');function le(){const[y,{refetch:_}]=z(async()=>(await x.media.list()).data),[B,k]=m(!1),[s,c]=m(null),[p,h]=m(null),[f,v]=m(!1);async function F(t){k(!0);try{await x.media.upload(t),_()}catch(o){console.error("Upload failed:",o)}finally{k(!1)}}async function H(){const t=s();if(t){v(!0);try{await x.media.update(t.id,{alt:t.alt||""}),c(null),_()}catch(o){console.error("Update failed:",o)}finally{v(!1)}}}async function G(){const t=p();if(t){v(!0);try{await x.media.delete(t.id),h(null),_()}catch(o){console.error("Delete failed:",o)}finally{v(!1)}}}return(()=>{var t=K(),o=t.firstChild,C=o.nextSibling,M=C.firstChild,S=M.firstChild,O=C.nextSibling;return r(M,i(g,{get when(){return!B()},get fallback(){return Q()},get children(){return R()}}),S),S.addEventListener("change",e=>{const n=e.target.files?.[0];n&&F(n)}),r(O,i(g,{get when(){return!y.loading},get fallback(){return W()},get children(){var e=q(),n=e.firstChild;return r(n,i(N,{get each(){return y()},children:a=>(()=>{var b=X(),d=b.firstChild,w=d.nextSibling,D=w.firstChild,T=D.nextSibling;return D.$$click=()=>c(a),T.$$click=()=>h(a),$(u=>{var U=`/api/media/${a.id}`,j=a.alt||a.filename;return U!==u.e&&A(d,"src",u.e=U),j!==u.t&&A(d,"alt",u.t=j),u},{e:void 0,t:void 0}),b})()})),r(e,i(g,{get when(){return y()?.length===0},get children(){return V()}}),null),e}})),r(t,i(E,{get isOpen(){return!!s()},onClose:()=>c(null),title:"Edit Alt Text",get footer(){return[(()=>{var e=L();return e.$$click=()=>c(null),e})(),(()=>{var e=Y();return e.$$click=H,r(e,()=>f()?"Saving...":"Save"),$(()=>e.disabled=f()),e})()]},get children(){return i(g,{get when(){return s()},get children(){var e=I(),n=e.firstChild,a=n.nextSibling,b=a.nextSibling,d=b.nextSibling;return r(a,()=>s()?.filename),d.$$input=w=>s()&&c({...s(),alt:w.currentTarget.value}),$(()=>d.value=s()?.alt||""),e}})}}),null),r(t,i(E,{get isOpen(){return!!p()},onClose:()=>h(null),title:"Delete Media",get footer(){return[(()=>{var e=L();return e.$$click=()=>h(null),e})(),(()=>{var e=Z();return e.$$click=G,r(e,()=>f()?"Deleting...":"Delete"),$(()=>e.disabled=f()),e})()]},get children(){return i(g,{get when(){return p()},get children(){var e=J(),n=e.firstChild,a=n.nextSibling;return r(a,()=>p()?.filename),e}})}}),null),t})()}P(["input","click"]);export{le as default};
