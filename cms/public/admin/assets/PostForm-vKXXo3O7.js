import{u as Re,g as Ae,d as l,c as ce,h as ue,t as c,i as s,b as n,S as I,e as r,F as pe,s as Be,a as $,f as De}from"./index-hslFEwih.js";import{s as Ne}from"./slugify-CLfdhm_z.js";import{R as Oe}from"./RichTextEditor-8QYPnv4i.js";import{M as qe}from"./MediaPicker-8W0swvC8.js";var Ue=c('<div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm mb-6">'),Ge=c('<div class=relative><img alt=Featured class="w-full h-32 object-cover rounded-lg"><button type=button class="absolute top-2 right-2 p-1 bg-red-600 text-white rounded-full hover:bg-red-700"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),We=c('<div class="p-8 max-w-4xl"><div class="page-header flex justify-between items-center"><div><h1 class=page-title></h1><p class=page-subtitle></p></div><div class="flex gap-2"><button class="btn btn-secondary">Cancel</button><button class="btn btn-primary"></button></div></div><form class=space-y-6><div class="grid grid-cols-3 gap-6"><div class="col-span-2 space-y-6"><div class="card p-6 space-y-4"><div><label for=title class=label>Title</label><input id=title type=text required class=input placeholder="Post title"></div><div><label for=slug class=label>Slug</label><div class="flex items-center"><span class="inline-flex items-center px-3 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm">/</span><input id=slug type=text required class="input rounded-l-none"placeholder=post-slug></div></div><div><label class=label>Content</label></div><div><label for=excerpt class=label>Excerpt</label><textarea id=excerpt rows=3 class=input placeholder="Brief description of the post"></textarea></div></div></div><div class=space-y-6><div class="card p-6 space-y-4"><h3 class="font-semibold text-gray-900">Status</h3><select class=input><option value=draft>Draft</option><option value=published>Published</option></select></div><div class="card p-6 space-y-4"><h3 class="font-semibold text-gray-900">Locale</h3><select class=input><option value=en>English</option><option value=de>German</option></select></div><div class="card p-6 space-y-4"><h3 class="font-semibold text-gray-900">Category</h3><select class=input><option value>No category</option></select></div><div class="card p-6 space-y-4"><h3 class="font-semibold text-gray-900">Featured Image</h3><button type=button class="btn btn-secondary w-full"></button></div><div class="card p-6 space-y-4"><h3 class="font-semibold text-gray-900">Keywords</h3><div class="flex gap-2"><input type=text class=input placeholder="Add keyword"><button type=button class="btn btn-secondary">Add</button></div><div class="flex flex-wrap gap-2">'),ze=c("<option>"),He=c('<span class="inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-sm"><button type=button class="text-gray-400 hover:text-gray-600"><svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">');function Ye(){const u=Re(),E=Ae(),o=()=>u.id!==void 0,[p,P]=l(""),[T,h]=l(""),[L,F]=l(""),[M,K]=l(""),[j,R]=l("en"),[A,B]=l("draft"),[D,N]=l(null),[g,x]=l(null),[d,y]=l([]),[O,q]=l(""),[U,G]=l(!1),[W,z]=l(""),[ge,_]=l(!1),[ve]=ce(async()=>(await $.categories.list()).data),[be]=ce(()=>o()?u.id:null,async t=>t?$.posts.get(t):null);ue(()=>{const t=be();t&&!p()&&(P(t.title),h(t.slug),F(t.content),K(t.excerpt),R(t.locale),B(t.status),N(t.categoryId),x(t.featuredImageId),y(t.keywords))}),ue(()=>{if(!o()){const t=Ne(p(),{lower:!0,strict:!0});h(t)}});async function H(t){t.preventDefault(),z(""),G(!0);try{const i={title:p(),slug:T(),content:L(),excerpt:M()||void 0,locale:j(),status:A(),categoryId:D()||void 0,featuredImageId:g()||void 0,keywords:d()};o()&&u.id?await $.posts.update(u.id,i):await $.posts.create(i),E("/posts")}catch(i){z(i instanceof Error?i.message:"Failed to save post")}finally{G(!1)}}function J(){const t=O().trim();t&&!d().includes(t)&&(y([...d(),t]),q(""))}function fe(t){y(d().filter(i=>i!==t))}return(()=>{var t=We(),i=t.firstChild,Q=i.firstChild,V=Q.firstChild,$e=V.nextSibling,he=Q.nextSibling,X=he.firstChild,m=X.nextSibling,C=i.nextSibling,xe=C.firstChild,Y=xe.firstChild,ye=Y.firstChild,Z=ye.firstChild,_e=Z.firstChild,ee=_e.nextSibling,te=Z.nextSibling,me=te.firstChild,Ce=me.nextSibling,Se=Ce.firstChild,le=Se.nextSibling,S=te.nextSibling;S.firstChild;var we=S.nextSibling,ke=we.firstChild,se=ke.nextSibling,Ie=Y.nextSibling,ie=Ie.firstChild,Ee=ie.firstChild,ae=Ee.nextSibling,re=ie.nextSibling,Pe=re.firstChild,ne=Pe.nextSibling,oe=re.nextSibling,Te=oe.firstChild,v=Te.nextSibling;v.firstChild;var w=oe.nextSibling,Le=w.firstChild,k=Le.nextSibling,Fe=w.nextSibling,Me=Fe.firstChild,de=Me.nextSibling,b=de.firstChild,Ke=b.nextSibling,je=de.nextSibling;return s(V,()=>o()?"Edit Post":"New Post"),s($e,()=>o()?"Update post content":"Create a new blog post"),X.$$click=()=>E("/posts"),m.$$click=H,s(m,n(I,{get when(){return!U()},fallback:"Saving...",get children(){return o()?"Update Post":"Create Post"}})),s(t,n(I,{get when(){return W()},get children(){var e=Ue();return s(e,W),e}}),C),C.addEventListener("submit",H),ee.$$input=e=>P(e.currentTarget.value),le.$$input=e=>h(e.currentTarget.value),s(S,n(Oe,{get value(){return L()},onChange:F,placeholder:"Write your post content..."}),null),se.$$input=e=>K(e.currentTarget.value),ae.addEventListener("change",e=>B(e.currentTarget.value)),ne.addEventListener("change",e=>R(e.currentTarget.value)),v.addEventListener("change",e=>N(e.currentTarget.value||null)),s(v,n(pe,{get each(){return ve()},children:e=>(()=>{var a=ze();return s(a,()=>e.name),r(()=>a.value=e.id),a})()}),null),s(w,n(I,{get when(){return g()},get children(){var e=Ge(),a=e.firstChild,f=a.nextSibling;return f.$$click=()=>x(null),r(()=>Be(a,"src",`/api/media/${g()}`)),e}}),k),k.$$click=()=>_(!0),s(k,()=>g()?"Change Image":"Select Image"),b.$$keydown=e=>e.key==="Enter"&&(e.preventDefault(),J()),b.$$input=e=>q(e.currentTarget.value),Ke.$$click=J,s(je,n(pe,{get each(){return d()},children:e=>(()=>{var a=He(),f=a.firstChild;return s(a,e,f),f.$$click=()=>fe(e),a})()})),s(t,n(qe,{get isOpen(){return ge()},onClose:()=>_(!1),onSelect:e=>{x(e.id),_(!1)}}),null),r(()=>m.disabled=U()),r(()=>ee.value=p()),r(()=>le.value=T()),r(()=>se.value=M()),r(()=>ae.value=A()),r(()=>ne.value=j()),r(()=>v.value=D()||""),r(()=>b.value=O()),t})()}De(["click","input","keydown"]);export{Ye as default};
