import{d as l,c as G,t as i,i as r,b as a,S as g,e as y,s as J,a as j,f as N}from"./index-DHZHvvFV.js";import{R as Q}from"./RichTextEditor-CQKYvnqI.js";import{M as U}from"./MediaPicker-CcEUBdoT.js";var V=i('<div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm mb-6">'),X=i('<div class="bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg text-sm mb-6">'),Y=i('<div class="relative mb-4"><img alt=Hero class="w-full h-64 object-cover rounded-lg"><button type=button class="absolute top-2 right-2 p-2 bg-red-600 text-white rounded-full hover:bg-red-700"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),Z=i('<div class="p-8 max-w-4xl"><div class=page-header><h1 class=page-title>Home Page</h1><p class=page-subtitle>Edit the homepage content</p></div><form class=space-y-6><div class="card p-6 space-y-6"><div><label class=label>Hero Image</label><button type=button class="btn btn-secondary"></button></div><div><label class=label>Description</label></div><div><label class=label>Keywords</label><div class="flex gap-2 mb-2"><input type=text class=input placeholder="Add a keyword"><button type=button class="btn btn-secondary">Add</button></div><div class="flex flex-wrap gap-2"></div></div><div class="pt-4 border-t border-gray-200"><button type=submit class="btn btn-primary">'),ee=i('<span class="inline-flex items-center gap-1 px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm"><button type=button class="text-gray-400 hover:text-gray-600"><svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),te=i('<span class="flex items-center gap-2"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>Saving...');function ne(){const[d,b]=l(null),[x,w]=l(""),[o,h]=l([]),[_,k]=l(""),[S,C]=l(!1),[I,E]=l(""),[H,M]=l(""),[A,m]=l(!1);G(async()=>{const e=await j.home.get();return b(e.heroImageId),w(e.description),h(e.keywords),e});async function L(e){e.preventDefault(),E(""),M(""),C(!0);try{await j.home.update({heroImageId:d()||void 0,description:x(),keywords:o()}),M("Home page updated successfully")}catch(s){E(s instanceof Error?s.message:"Failed to update home page")}finally{C(!1)}}function K(){const e=_().trim();e&&!o().includes(e)&&(h([...o(),e]),k(""))}function O(e){h(o().filter(s=>s!==e))}return(()=>{var e=Z(),s=e.firstChild,c=s.nextSibling,B=c.firstChild,v=B.firstChild,T=v.firstChild,f=T.nextSibling,$=v.nextSibling;$.firstChild;var D=$.nextSibling,F=D.firstChild,P=F.nextSibling,u=P.firstChild,W=u.nextSibling,q=P.nextSibling,z=D.nextSibling,R=z.firstChild;return r(e,a(g,{get when(){return I()},get children(){var t=V();return r(t,I),t}}),c),r(e,a(g,{get when(){return H()},get children(){var t=X();return r(t,H),t}}),c),c.addEventListener("submit",L),r(v,a(g,{get when(){return d()},get children(){var t=Y(),n=t.firstChild,p=n.nextSibling;return p.$$click=()=>b(null),y(()=>J(n,"src",`/api/media/${d()}`)),t}}),f),f.$$click=()=>m(!0),r(f,()=>d()?"Change Hero Image":"Select Hero Image"),r($,a(Q,{get value(){return x()},onChange:w,placeholder:"Write the homepage description..."}),null),u.$$keydown=t=>t.key==="Enter"&&(t.preventDefault(),K()),u.$$input=t=>k(t.currentTarget.value),W.$$click=K,r(q,()=>o().map(t=>(()=>{var n=ee(),p=n.firstChild;return r(n,t,p),p.$$click=()=>O(t),n})())),r(R,a(g,{get when(){return!S()},get fallback(){return te()},children:"Save Changes"})),r(e,a(U,{get isOpen(){return A()},onClose:()=>m(!1),onSelect:t=>{b(t.id),m(!1)}}),null),y(()=>R.disabled=S()),y(()=>u.value=_()),e})()}N(["click","input","keydown"]);export{ne as default};
