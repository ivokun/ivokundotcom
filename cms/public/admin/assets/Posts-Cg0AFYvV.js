import{d,c as le,t as r,i as l,b as a,F as re,j as ne,e as h,k as se,S as O,a as v,f as ae}from"./index-hslFEwih.js";import{M}from"./Modal-XYMlKrKX.js";import{A as T}from"./components-BrgC8wcb.js";var ie=r('<svg class="w-4 h-4 mr-2"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v16m8-8H4">'),oe=r('<div class=table-container><table class=table><thead><tr><th>Title</th><th>Status</th><th>Locale</th><th>Created</th><th class=w-32>Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200">'),ue=r('<div class="p-12 text-center text-gray-500"><svg class="mx-auto h-12 w-12 text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><p class=mt-2>No posts found'),ce=r("<p class=text-gray-700>Are you sure you want to delete <strong></strong>?"),de=r("<p class=text-gray-700>Are you sure you want to publish <strong></strong>?"),he=r("<p class=text-gray-700>Are you sure you want to unpublish <strong></strong>?"),pe=r('<div class=p-8><div class="page-header flex justify-between items-center"><div><h1 class=page-title>Posts</h1><p class=page-subtitle>Manage your blog posts</p></div></div><div class="card p-4 mb-6"><div class="flex gap-4"><div><label class=label>Status</label><select class=input><option value=all>All</option><option value=draft>Draft</option><option value=published>Published</option></select></div><div><label class=label>Locale</label><select class=input><option value=all>All</option><option value=en>English</option><option value=de>German</option></select></div></div></div><div class=card>'),ge=r('<div class="p-8 text-center"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto">'),$e=r('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z">'),be=r('<tr><td class=font-medium></td><td><span></span></td><td class="text-gray-500 uppercase"></td><td class=text-gray-500></td><td><div class="flex items-center gap-2"><button class="text-red-600 hover:text-red-800"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),ve=r('<button class="text-green-600 hover:text-green-800"title=Publish><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 13l4 4L19 7">'),fe=r('<button class="text-yellow-600 hover:text-yellow-800"title=Unpublish><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636">'),P=r('<button class="btn btn-secondary flex-1">Cancel'),_e=r('<button class="btn btn-danger flex-1">'),V=r('<button class="btn btn-primary flex-1">');function ye(){const[f,z]=d("all"),[_,R]=d("all"),[m,{refetch:x}]=le(async()=>{const t={};return f()!=="all"&&(t.status=f()),_()!=="all"&&(t.locale=_()),(await v.posts.list(t)).data}),[w,g]=d(null),[y,$]=d(null),[k,b]=d(null),[u,c]=d(!1);async function G(){const t=w();if(t){c(!0);try{await v.posts.delete(t.id),g(null),x()}catch(n){console.error("Delete failed:",n)}finally{c(!1)}}}async function q(){const t=y();if(t){c(!0);try{await v.posts.publish(t.id),$(null),x()}catch(n){console.error("Publish failed:",n)}finally{c(!1)}}}async function I(){const t=k();if(t){c(!0);try{await v.posts.unpublish(t.id),b(null),x()}catch(n){console.error("Unpublish failed:",n)}finally{c(!1)}}}function J(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}return(()=>{var t=pe(),n=t.firstChild;n.firstChild;var A=n.nextSibling,K=A.firstChild,D=K.firstChild,Q=D.firstChild,L=Q.nextSibling,W=D.nextSibling,X=W.firstChild,j=X.nextSibling,Y=A.nextSibling;return l(n,a(T,{href:"/posts/new",class:"btn btn-primary",get children(){return[ie(),"New Post"]}}),null),L.addEventListener("change",e=>z(e.currentTarget.value)),j.addEventListener("change",e=>R(e.currentTarget.value)),l(Y,a(O,{get when(){return!m.loading},get fallback(){return ge()},get children(){return[(()=>{var e=oe(),i=e.firstChild,o=i.firstChild,Z=o.nextSibling;return l(Z,a(re,{get each(){return m()},children:s=>(()=>{var U=be(),B=U.firstChild,F=B.nextSibling,E=F.firstChild,H=F.nextSibling,N=H.nextSibling,ee=N.nextSibling,C=ee.firstChild,S=C.firstChild;return l(B,()=>s.title),l(E,()=>s.status),l(H,()=>s.locale),l(N,()=>J(s.createdAt)),l(C,a(T,{get href(){return`/posts/${s.id}`},class:"text-primary-600 hover:text-primary-800",get children(){return $e()}}),S),l(C,(()=>{var te=ne(()=>s.status==="draft");return()=>te()?(()=>{var p=ve();return p.$$click=()=>$(s),p})():(()=>{var p=fe();return p.$$click=()=>b(s),p})()})(),S),S.$$click=()=>g(s),h(()=>se(E,`badge ${s.status==="published"?"badge-success":"badge-warning"}`)),U})()})),e})(),a(O,{get when(){return m()?.length===0},get children(){return ue()}})]}})),l(t,a(M,{get isOpen(){return!!w()},onClose:()=>g(null),title:"Delete Post",get footer(){return[(()=>{var e=P();return e.$$click=()=>g(null),e})(),(()=>{var e=_e();return e.$$click=G,l(e,()=>u()?"Deleting...":"Delete"),h(()=>e.disabled=u()),e})()]},get children(){var e=ce(),i=e.firstChild,o=i.nextSibling;return l(o,()=>w()?.title),e}}),null),l(t,a(M,{get isOpen(){return!!y()},onClose:()=>$(null),title:"Publish Post",get footer(){return[(()=>{var e=P();return e.$$click=()=>$(null),e})(),(()=>{var e=V();return e.$$click=q,l(e,()=>u()?"Publishing...":"Publish"),h(()=>e.disabled=u()),e})()]},get children(){var e=de(),i=e.firstChild,o=i.nextSibling;return l(o,()=>y()?.title),e}}),null),l(t,a(M,{get isOpen(){return!!k()},onClose:()=>b(null),title:"Unpublish Post",get footer(){return[(()=>{var e=P();return e.$$click=()=>b(null),e})(),(()=>{var e=V();return e.$$click=I,l(e,()=>u()?"Unpublishing...":"Unpublish"),h(()=>e.disabled=u()),e})()]},get children(){var e=he(),i=e.firstChild,o=i.nextSibling;return l(o,()=>k()?.title),e}}),null),h(()=>L.value=f()),h(()=>j.value=_()),t})()}ae(["click"]);export{ye as default};
