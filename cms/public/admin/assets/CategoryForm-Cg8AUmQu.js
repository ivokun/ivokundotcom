import{u as z,g as A,d as n,c as B,h as k,t as b,i as s,b as R,S as U,e as u,a as p,f as G}from"./index-q5GqSJ5T.js";import{s as H}from"./slugify-CLfdhm_z.js";var I=b('<div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm">'),J=b('<div class="p-8 max-w-2xl"><div class=page-header><h1 class=page-title></h1><p class=page-subtitle></p></div><form class="card p-6 space-y-6"><div><label for=name class=label>Name</label><input id=name type=text required class=input placeholder="Category name"></div><div><label for=slug class=label>Slug</label><div class="flex items-center"><span class="inline-flex items-center px-3 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm">/</span><input id=slug type=text required class="input rounded-l-none"placeholder=category-slug></div><p class="mt-1 text-xs text-gray-500">URL-friendly identifier</p></div><div class="flex items-center gap-4 pt-4"><button type=button class="btn btn-secondary">Cancel</button><button type=submit class="btn btn-primary">'),K=b('<span class="flex items-center gap-2"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>Saving...');function Q(){const i=z(),f=A(),t=()=>i.id!==void 0,[r,m]=n(""),[c,d]=n(""),[v,y]=n(!1),[x,$]=n(""),[h]=B(()=>t()?i.id:null,async e=>e?p.categories.get(e):null);k(()=>{const e=h();e&&!r()&&(m(e.name),d(e.slug))}),k(()=>{if(!t()){const e=H(r(),{lower:!0,strict:!0});d(e)}});async function q(e){e.preventDefault(),$(""),y(!0);try{t()&&i.id?await p.categories.update(i.id,{name:r(),slug:c()}):await p.categories.create({name:r(),slug:c()}),f("/categories")}catch(l){$(l instanceof Error?l.message:"Failed to save category")}finally{y(!1)}}return(()=>{var e=J(),l=e.firstChild,_=l.firstChild,F=_.nextSibling,o=l.nextSibling,g=o.firstChild,L=g.firstChild,C=L.nextSibling,S=g.nextSibling,T=S.firstChild,D=T.nextSibling,P=D.firstChild,w=P.nextSibling,j=S.nextSibling,E=j.firstChild,N=E.nextSibling;return s(_,()=>t()?"Edit Category":"New Category"),s(F,()=>t()?"Update category details":"Create a new content category"),o.addEventListener("submit",q),s(o,R(U,{get when(){return x()},get children(){var a=I();return s(a,x),a}}),g),C.$$input=a=>m(a.currentTarget.value),w.$$input=a=>d(a.currentTarget.value),E.$$click=()=>f("/categories"),s(N,R(U,{get when(){return!v()},get fallback(){return K()},get children(){return t()?"Update Category":"Create Category"}})),u(()=>N.disabled=v()||h.loading),u(()=>C.value=r()),u(()=>w.value=c()),e})()}G(["input","click"]);export{Q as default};
